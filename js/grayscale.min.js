/*!
 * Start Bootstrap - Grayscale v5.0.1 (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */
!function(n){"use strict";var r,t,o="https://money2nepal-email.azurewebsites.net/api/05969234-399b-4800-96f8-3f26ca716fb8",e=location.href;-1!=e.indexOf("#success")?function(){m();var e=function(e,t){t||(t=window.location.href);e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?r[2]:"":null}("token"),t=sessionStorage.getItem(e);if(null!=t&&null!=t&&0<t.length){var r=JSON.parse(t);!function(t,r){if(t.EmailAlreadySent)return u(t),d(),n("#modalOrderComplete").modal("show");var e={CustomerEmail:t.Email,Subject:"Order Confirmation - "+t.TransactionRefNo,Body:"G'day "+t.Name+"<br><br>Thank you for your transaction with money2nepal. We look forward to delivering your money soon. We will contact you on your mobile shortly to verify your transaction.<br><br>Your order details are below:<br><br><strong>Order Receipt Number:</strong> "+t.TransactionRefNo+"<br><strong>Amount:</strong> $"+l(t.Amount)+"<br><strong>Service Charge:</strong> $"+t.ServiceCharge+"<br><strong>Rate:</strong> Rs."+t.Rate+"<br><strong>Total:</strong> "+s(t.Total)+"<br><strong>Sender:</strong> "+t.Name+"<br><strong>Sender Email:</strong> "+t.Email+"<br><strong>Sender Mobile:</strong> "+g(t.Mobile)+"<br><strong>Recipient:</strong> "+t.RecipientName+"<br><strong>Recipient Mobile:</strong> "+g(t.RecipientMobile)+"<br><strong>Instructions:</strong> "+t.Instructions+"<br><br>Best regards,<br>money2nepal",Key:"4B97C939-C37B-4CE1-9AD7-94DA349046FA"};n.ajax({contentType:"application/json",url:o,data:JSON.stringify(e),type:"POST"}).done(function(e){1==e?(t.EmailAlreadySent=!0,sessionStorage.setItem(r,JSON.stringify(t)),u(t),d(),n("#modalOrderComplete").modal("show")):alert("Something went wrong finalising your order. Please contact us and provide this receipt number: "+t.TransactionRefNo)}).fail(function(){alert("Something went wrong finalising your order. Please contact us and provide this receipt number: "+t.TransactionRefNo)})}(r,e)}else d(),n("#modalSessionExpired").modal("show")}():-1!=e.indexOf("#failure")?n("#modalFailure").modal("show"):-1!=e.indexOf("#cancelled")&&n("#modalCancelled").modal("show"),n("#serviceCharge").text(5),n('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=n(this.hash);if((e=e.length?e:n("[name="+this.hash.slice(1)+"]")).length)return n("html, body").animate({scrollTop:e.offset().top-70},1e3,"easeInOutExpo"),!1}}),n(".js-scroll-trigger").click(function(){n(".navbar-collapse").collapse("hide")}),n("body").scrollspy({target:"#mainNav",offset:100});var a=function(){100<n("#mainNav").offset().top?n("#mainNav").addClass("navbar-shrink"):n("#mainNav").removeClass("navbar-shrink")};function i(){if(c(r)){var e=n("#amount").val();c(e)&&0<e-5?(t=Math.round((e-5)*r),n("#amountHelp").text("After $5 service charge, $"+l(e-5)+" @ Rs."+r+" will be Rs."+s(t)+".")):n("#amountHelp").text("Today's exchange rate is Rs. "+r+" for one aussie dollar.")}}function l(e){return c(e)?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):null}function s(e){if(!c(e))return null;for(var t="",r=e.toString().split("."),n=r[0].length-1;0<=n;n--)0<t.length&&t.length%3==0&&(t=","+t),t=r[0][n]+t;return 1<r.length&&(t=t+"."+r[1]),t}function c(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}function u(e){n(".reviewAmount").text("$"+l(e.Amount)),n(".reviewServiceCharge").text("$"+e.ServiceCharge),n(".reviewRate").text("Rs. "+e.Rate),n(".reviewTotal").text("Rs. "+s(e.Total)),n(".reviewName").text(e.Name),n(".reviewEmail").text(e.Email),n(".reviewMobile").text(g(e.Mobile)),n(".reviewRecipientName").text(e.RecipientName),n(".reviewRecipientMobile").text(g(e.RecipientMobile)),n(".reviewInstructions").text(e.Instructions),n(".reviewReceiptNumber").text(e.TransactionRefNo)}function f(){return{Amount:n("#amount").val(),Email:n("#email").val(),Name:n("#name").val(),Mobile:n("#mobile").val(),RecipientName:n("#recipientName").val(),RecipientMobile:n("#recipientMobile").val(),Instructions:n("#instructions").val(),Declaration:n("#declaration").is(":checked"),Rate:r,Total:t,ServiceCharge:5}}function m(){n("#modalPleaseWait").modal("show")}function d(){n("#modalPleaseWait").modal("hide")}function g(e){if(!c(e))return null;for(var t="",r=e.length-1;0<=r;r--)3!=t.length&&7!=t.length||(t=" "+t),t=e[r]+t;return t}a(),n(window).scroll(a),n.ajax({url:"https://free.currencyconverterapi.com/api/v5/convert?q=AUD_NPR&compact=ultra"}).done(function(e){if(void 0!==e&&null!=e){var t=e.AUD_NPR;c(t)&&(t+=2,r=Math.round(100*t)/100,i())}}).fail(function(){alert("Sorry, we couldn't load today's exchange rate. As such we will not be able to process your request this time. Please try again later.")}),n("#amount").change(function(){i()}),n("#transferForm").submit(function(e){if(e.preventDefault(),recaptchaLoaded){var t=f();c(t.Amount)&&c(t.Rate)&&c(t.Total)&&c(t.ServiceCharge)?(u(t),n("#modalConfirmPayment").modal("show")):alert("Sorry, unexpected error occurred.")}else alert("Sorry, we weren't able to load all the components. Please try refreshing the page.")}),n("#buttonCancelPay").click(function(e){d()}),n("#buttonPay").click(function(e){m();var o=f(),t={Amount:o.Amount,Reference:g(o.Mobile),Key:"1ef33243-96c8-44f9-abf7-8dfac14c3226",RecaptchaResponse:n("#g-recaptcha-response").val()};n.ajax({contentType:"application/json",url:"https://money2nepal.azurewebsites.net/api/5ee2f588-8970-452c-9403-bf2b1af58cf4",data:JSON.stringify(t),type:"POST"}).done(function(e){if(0!=e.errorCode)d(),-1010==e.errorCode?alert("Sorry, we couldn't verify that you are a human."):alert("Sorry, we couldn't take you to POLi for the payments. Error code: "+e.errorCode);else{o.TransactionRefNo=e.transactionRefNo;var t=JSON.stringify(o),r=e.navigateURL.split("=");2!==r.length&&alert("Unexpected error occurred. Please contact support.");var n=r[1];sessionStorage.setItem(n,t),window.location.href=e.navigateURL}}).fail(function(){alert("Sorry, something went wrong processing your request."),d()})})}(jQuery);var recaptchaLoaded=!1,onRecaptchaLoad=function(){recaptchaLoaded=!0};
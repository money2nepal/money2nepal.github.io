/*!
 * Start Bootstrap - Grayscale v5.0.1 (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */
!function(n){"use strict";var a,t=0,e=location.href;-1!=e.indexOf("#success")?n("#modalSuccess").modal("show"):-1!=e.indexOf("#failure")?n("#modalFailure").modal("show"):-1!=e.indexOf("#cancelled")&&n("#modalCancelled").modal("show"),n("#serviceCharge").text(5),n('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=n(this.hash);if((e=e.length?e:n("[name="+this.hash.slice(1)+"]")).length)return n("html, body").animate({scrollTop:e.offset().top-70},1e3,"easeInOutExpo"),!1}}),n(".js-scroll-trigger").click(function(){n(".navbar-collapse").collapse("hide")}),n("body").scrollspy({target:"#mainNav",offset:100});var o=function(){100<n("#mainNav").offset().top?n("#mainNav").addClass("navbar-shrink"):n("#mainNav").removeClass("navbar-shrink")};function i(){if(c(a)){var e=n("#amount").val();c(e)&&0<e-5?(t=Math.round((e-5)*a),n("#amountHelp").text("After $5 service charge, $"+r(e-5)+" @ Rs."+a+" will be Rs. "+l(t)+".")):n("#amountHelp").text("Today's exchange rate is Rs. "+a+" for one aussie dollar.")}}function r(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function l(e){for(var t="",n=e.toString().split("."),a=n[0].length-1;0<=a;a--)0<t.length&&t.length%3==0&&(t=","+t),t=n[0][a]+t;return 1<n.length&&(t=t+"."+n[1]),t}function c(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}function s(){return{Amount:n("#amount").val(),Email:n("#email").val(),Name:n("#name").val(),Mobile:n("#mobile").val(),RecipientName:n("#recipientName").val(),RecipientMobile:n("#recipientMobile").val(),Instructions:n("#instructions").val(),Declaration:n("#declaration").is(":checked"),Rate:a,Total:t,ServiceCharge:5}}function u(){n("#spinner").addClass("d-none"),n("#buttonPOLi").removeClass("d-none")}o(),n(window).scroll(o),n.ajax({url:"https://free.currencyconverterapi.com/api/v5/convert?q=AUD_NPR&compact=ultra"}).done(function(e){if(void 0!==e&&null!=e){var t=e.AUD_NPR;c(t)&&(t+=2,a=Math.round(100*t)/100,i())}}),n("#amount").change(function(){i()}),n("#transferForm").submit(function(e){e.preventDefault();var t=s();t.Amount&&(n("#reviewAmount").text("$"+r(t.Amount)),n("#reviewServiceCharge").text("$"+t.ServiceCharge),n("#reviewRate").text("Rs. "+l(t.Rate)),n("#reviewTotal").text("Rs. "+l(t.Total)),n("#reviewName").text(t.Name),n("#reviewMobile").text(t.Mobile),n("#reviewRecipientName").text(t.RecipientName),n("#reviewRecipientMobile").text(t.RecipientMobile),n("#reviewInstructions").text(t.Instructions),n("#modalConfirmPayment").modal("show"))}),n("#buttonCancelPay").click(function(e){u()}),n("#buttonPay").click(function(e){n("#buttonPOLi").addClass("d-none"),n("#spinner").removeClass("d-none");var a=s(),t={Amount:a.Amount,Reference:a.Mobile,Key:"1ef33243-96c8-44f9-abf7-8dfac14c3226"};n.ajax({contentType:"application/json",url:"https://money2nepal.azurewebsites.net/api/5ee2f588-8970-452c-9403-bf2b1af58cf4",data:JSON.stringify(t),type:"POST"}).done(function(e){if(0!=e.errorCode)alert("Sorry, something went wrong."),u();else{var t=JSON.stringify(a),n=e.transactionRefNo;localStorage.setItem(n,t),window.location.href=e.navigateURL}}).fail(function(){alert("Sorry, something went wrong processing your request."),u()})})}(jQuery);